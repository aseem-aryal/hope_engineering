<?php
/* 
 * Generated by CRUDigniter v1.3 Beta 
 * www.crudigniter.com
 */
 
class Other_details_cv extends CI_Controller
{
    function __construct()
    {
        parent::__construct();
        $this->load->model('Other_details_cv_model');
    }
    
    /*
     * Listing of other_details_cv
     */
    function index()
    {
        $data['other_details_cv'] = $this->Other_details_cv_model->get_all_other_details_cv();
        $this->load->view('other_details_cv/index',$data);
    }
    
    /*
     * Adding new other_details_cv
     */
    function add()
    {   
        $this->load->library('form_validation');

		$this->form_validation->set_rules('route_permit','Route Permit','max_length[255]');
		$this->form_validation->set_rules('permit_no','Permit No','max_length[255]');
		$this->form_validation->set_rules('permit_area','Permit Area','max_length[255]');
		$this->form_validation->set_rules('fitness_certificate','Fitness Certificate','max_length[255]');
		$this->form_validation->set_rules('fitness_token_no','Fitness Token No','integer');
		$this->form_validation->set_rules('passenger_load_challan','Passenger Load Challan','max_length[255]');
		$this->form_validation->set_rules('challan_no','Challan No','integer');
		
		if($this->form_validation->run())     
        {   
            $params = array(
				'general_details_id' => $this->input->post('general_details_id'),
				'route_permit' => $this->input->post('route_permit'),
				'permit_no' => $this->input->post('permit_no'),
				'permit_valid_upto' => $this->input->post('permit_valid_upto'),
                                'permit_valid_upto_nep' => $this->input->post('permit_valid_upto_nep'),		
                                'permit_area' => $this->input->post('permit_area'),
				'fitness_certificate' => $this->input->post('fitness_certificate'),
				'fitness_token_no' => $this->input->post('fitness_token_no'),
				'fitness_valid_upto' => $this->input->post('fitness_valid_upto'),
				'fitness_valid_upto_nep' => $this->input->post('fitness_valid_upto_nep'),
				'passenger_load_challan' => $this->input->post('passenger_load_challan'),
				'challan_no' => $this->input->post('challan_no'),
				'challan_date' => $this->input->post('challan_date'),
                                'challan_date_nep' => $this->input->post('challan_date_nep')
            );
            
            $other_details_cv_id = $this->Other_details_cv_model->add_other_details_cv($params);
            redirect('details/index/'.$this->input->post('general_details_id'));
        }
        else
        {
            $data['general_details_id']= $this->uri->segment(3);
            $this->load->view('includes/header.php');
            $this->load->view('includes/sidebar.php');
            $this->load->view('other_details_cv/add',$data);
            $this->load->view('includes/footer.php');
        }
    }
    
    /*
     * Editing other_details_cv
     */
    function edit($other_details_id)
    {   
        $this->load->library('form_validation');

		$this->form_validation->set_rules('route_permit','Route Permit','max_length[255]');
		$this->form_validation->set_rules('permit_no','Permit No','max_length[255]');
		$this->form_validation->set_rules('permit_area','Permit Area','max_length[255]');
		$this->form_validation->set_rules('fitness_certificate','Fitness Certificate','max_length[255]');
		$this->form_validation->set_rules('fitness_token_no','Fitness Token No','integer');
		$this->form_validation->set_rules('passenger_load_challan','Passenger Load Challan','max_length[255]');
		$this->form_validation->set_rules('challan_no','Challan No','integer');
		
		if($this->form_validation->run())     
        {   
            $params = array(
				'general_details_id' => $this->input->post('general_details_id'),
				'route_permit' => $this->input->post('route_permit'),
				'permit_no' => $this->input->post('permit_no'),
				'permit_valid_upto' => $this->input->post('permit_valid_upto'),
				'permit_valid_upto_nep' => $this->input->post('permit_valid_upto_nep'),
				'permit_area' => $this->input->post('permit_area'),
				'fitness_certificate' => $this->input->post('fitness_certificate'),
				'fitness_token_no' => $this->input->post('fitness_token_no'),
				'fitness_valid_upto' => $this->input->post('fitness_valid_upto'),
				'fitness_valid_upto_nep' => $this->input->post('fitness_valid_upto_nep'),
				'passenger_load_challan' => $this->input->post('passenger_load_challan'),
				'challan_no' => $this->input->post('challan_no'),
				'challan_date' => $this->input->post('challan_date'),
                                'challan_date_nep' => $this->input->post('challan_date_nep')
            );

            $this->Other_details_cv_model->update_other_details_cv($other_details_id,$params);            
            redirect('details/index/'.$this->input->post('general_details_id'));
        }
        else
        {   
            $data['other_details_cv'] = $this->Other_details_cv_model->get_other_details_cv($other_details_id);
            $data['general_details_id']= $this->uri->segment(3);
            $this->load->view('includes/header.php');
            $this->load->view('includes/sidebar.php');
            $this->load->view('other_details_cv/edit',$data);
            $this->load->view('includes/footer.php');
        }
    }
    
    /*
     * Deleting other_details_cv
     */
    function remove($other_details_id, $general_details_id)
    {
        $this->Other_details_cv_model->delete_other_details_cv($other_details_id);
        redirect('details/index/'.$general_details_id);
    }
}
